import{i as a}from"./job-eb8dc8ef.js";import"./translate-d272070d.js";import{r as n,i as m,e as o}from"./sounds-5d3f972e.js";import{i as u,s as d}from"./readRunes-ecdf0d32.js";import{s as l,t as e}from"./arrayFilling-3bc428d4.js";import{h as c}from"./workadventureFeatures-48ab46db.js";import{o as y}from"./init-0f7c740a.js";y().then(async()=>{await a(),c();const i=WA.sound.loadSound(`${n}/sounds/cavewater.mp3`);let t={volume:.3,loop:!0,rate:1,detune:1,delay:0,seek:0,mute:!1};i.play(t),m([{name:"doSound",path:"do.mp3"},{name:"reSound",path:"re.mp3"},{name:"miSound",path:"mi.mp3"},{name:"faSound",path:"fa.mp3"},{name:"solSound",path:"sol.mp3"},{name:"laSound",path:"la.mp3"},{name:"siSound",path:"si.mp3"}]);{const s=()=>{WA.room.hideLayer("notes/do"),WA.room.hideLayer("notes/re"),WA.room.hideLayer("notes/mi"),WA.room.hideLayer("notes/fa"),WA.room.hideLayer("notes/sol"),WA.room.hideLayer("notes/la"),WA.room.hideLayer("notes/si"),WA.room.showLayer("notes_grey")};WA.state.victory&&s(),WA.state.onVariableChange("victory").subscribe(r=>{r&&s()}),l("musicTiles",[["fa","si","do","re","mi","fa","re","fa","re","fa","si","re","si","sol","re","si"]],()=>{o("failureSound"),WA.nav.goToRoom("./music.tmj")},()=>{WA.state.victory=!0,o("successSound"),s()}),WA.room.onEnterLayer("notes/do").subscribe(()=>{WA.state.victory||(o("doSound"),e("musicTiles","do"))}),WA.room.onEnterLayer("notes/re").subscribe(()=>{WA.state.victory||(o("reSound"),e("musicTiles","re"))}),WA.room.onEnterLayer("notes/mi").subscribe(()=>{WA.state.victory||(o("miSound"),e("musicTiles","mi"))}),WA.room.onEnterLayer("notes/fa").subscribe(()=>{WA.state.victory||(o("faSound"),e("musicTiles","fa"))}),WA.room.onEnterLayer("notes/sol").subscribe(()=>{WA.state.victory||(o("solSound"),e("musicTiles","sol"))}),WA.room.onEnterLayer("notes/la").subscribe(()=>{WA.state.victory||(o("laSound"),e("musicTiles","la"))}),WA.room.onEnterLayer("notes/si").subscribe(()=>{WA.state.victory||(o("siSound"),e("musicTiles","si"))}),u(),d("infos",{content:"views.music.text",title:"views.music.title"})}WA.room.onEnterLayer("exit").subscribe(()=>{i.stop()})});
