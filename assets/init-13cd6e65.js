import{r as d}from"./config-adf52b6e.js";import{e as m,g,f as c}from"./firebase-6d97cafc.js";const s=["choice","museum","maze","music","treasureEnigma","bomb","escape"],f=async o=>{await WA.onInit(),WA.controls.disableWebcam(),WA.controls.disableMicrophone(),WA.controls.disableInviteButton(),console.info("During this game, the invite button is disabled"),WA.controls.disableRightClick(),console.info("During this game, the right click button is disabled"),WA.controls.disableScreenSharing(),console.info("During this game, the screen sharing is disabled"),WA.controls.disableMapEditor(),console.info("During this game, the map editor is disabled"),WA.controls.disableRoomList(),console.info("During this game, the room list is disabled");const t=await WA.player.getPosition();WA.camera.set(t.x,t.y,400,400);const i=await m();console.info("Your current step in the game is: ",i==null?void 0:i.step);const e=await g(),r=await WA.nav.getCoWebSites();if((e==null||e.choice==null)&&WA.ui.modal.openModal({allowApi:!0,position:"center",allow:"fullscreen",title:"become spy",src:`${d}/views/playing/playing.html`}),(e==null?void 0:e.choice)=="onlive"&&b(r),(i==null?void 0:i.step)==o)return;if((!i||!i.step)&&o=="choice"){await c(o);return}if(i==null){WA.nav.goToRoom(`./${s[0]}.tmj`);return}const l=s.findIndex(n=>n===o),a=s.findIndex(n=>n===i.step);if(l!==a+1){WA.nav.goToRoom(`./${s[a]}.tmj`);return}else await c(o)},b=o=>{o.forEach(t=>{t.close()})};export{f as o};
