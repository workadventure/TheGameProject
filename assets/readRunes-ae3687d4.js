import{t as i}from"./translate-1ba34e64.js";import{f as n}from"./job-1b9471bc.js";import{r}from"./config-adf52b6e.js";let o=null,l=null;const y=()=>{WA.onInit().then(()=>{WA.player.state.onVariableChange("askForRuneWebsiteClose").subscribe(e=>{e&&u()})})},d=(e,a={},t="modules.runes.see",s="base")=>{WA.room.onEnterLayer(e).subscribe(()=>{l=WA.ui.displayPlayerMessage({message:i("utils.executeAction",{action:i(t)}),callback:()=>{c(a,s)}})}),WA.room.onLeaveLayer(e).subscribe(()=>{l==null||l.remove()})},c=async(e,a)=>{n("readRunes")||(e.canRead="0"),WA.controls.disablePlayerControls();let t="";for(let s=0;s<Object.keys(e).length;s++)s!==0&&(t+="&"),t+=Object.keys(e)[s]+"="+Object.values(e)[s];o=await WA.ui.website.open({url:`${r}/views/runes/${a}.html${t?"?"+t:""}`,allowApi:!0,allowPolicy:"",position:{vertical:"middle",horizontal:"middle"},size:{height:"50vh",width:"50vw"}}),WA.player.state.askForRuneWebsiteClose=!1},u=()=>{o==null||o.close(),o=null,WA.controls.restorePlayerControls()},A=()=>{WA.player.state.askForRuneWebsiteClose=!0};export{A as a,y as i,d as s};
