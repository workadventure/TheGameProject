import{t as _}from"./translate-da45fed2.js";import{p as n}from"./sounds-fa9583ac.js";let $=null;const b=(e=["switchingTiles"],t=[])=>{for(let s=0;s<e.length;s++)l(e[s],t[s]??null)},l=(e,t=null,s=!1,r="")=>{const o=JSON.parse(WA.state[`${e}VictoryCondition`]),u=WA.state[`${e}TilesNumber`];if(WA.state[`${e}IsVictory`])t&&t();else for(let a=0;a<Object.keys(o).length;a++)W(e,a),WA.room.onEnterLayer(`${e}/${a}_layer/zone`).subscribe(()=>{WA.state[`${e}IsVictory`]||(s?setTimeout(()=>{$=WA.ui.displayActionMessage({message:_("utils.executeAction",{action:_(r)}),callback:()=>{A(e,a,u,o)}})},100):A(e,a,u,o))}),s&&WA.room.onLeaveLayer(`${e}/${a}_layer/zone`).subscribe(()=>{setTimeout(()=>{$==null||$.remove()},100)}),WA.state.onVariableChange(`${e}_${a}_value`).subscribe(()=>{W(e,a)});WA.state.onVariableChange(`${e}IsVictory`).subscribe(a=>{a&&t&&t()})},f=(e,t)=>{for(let s=0;s<Object.keys(t).length;s++)if(WA.state[`${e}_${s}_value`]!=t[s])return!1;return!0},A=(e,t,s,r)=>{let o=WA.state[`${e}_${t}_value`]?WA.state[`${e}_${t}_value`]:0;WA.state[`${e}_${t}_value`]=(o+1)%s,f(e,r)&&(n("successSound"),WA.state[`${e}IsVictory`]=!0)},W=(e,t)=>{WA.room.hideLayer(`${e}/${t}_layer`),WA.room.showLayer(`${e}/${t}_layer/${WA.state[`${e}_${t}_value`]}`);for(let s=1;s<4;s++)WA.room.hideLayer(`${e}/${t}_layer_${s}`),WA.room.showLayer(`${e}/${t}_layer_${s}/${WA.state[`${e}_${t}_value`]}`)};export{b as i,l as s};
