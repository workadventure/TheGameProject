import{i as n}from"./job-4ea249b3.js";import"./translate-1ba34e64.js";import{f as m}from"./firebase-6d97cafc.js";import{r as l}from"./config-3db041a0.js";import{i as u,s as d}from"./readRunes-40bf7042.js";import{i as c,e}from"./sounds-0b59e88b.js";import{s as y,t as o}from"./arrayFilling-3bc428d4.js";import{o as f}from"./init-3672f7c9.js";import{d as A,a as p,b as W}from"./ui-ca9d2579.js";const t="music";f(t).then(async()=>{await n(),A(),p(),W();const r=WA.sound.loadSound(`${l}/sounds/cavewater.mp3`);let a={volume:.1,loop:!1,rate:1,detune:1,delay:0,seek:0,mute:!1};r.play(a),c([{name:"doSound",path:"do.mp3"},{name:"reSound",path:"re.mp3"},{name:"miSound",path:"mi.mp3"},{name:"faSound",path:"fa.mp3"},{name:"solSound",path:"sol.mp3"},{name:"laSound",path:"la.mp3"},{name:"siSound",path:"si.mp3"}]);{const s=()=>{WA.room.hideLayer("notes/do"),WA.room.hideLayer("notes/re"),WA.room.hideLayer("notes/mi"),WA.room.hideLayer("notes/fa"),WA.room.hideLayer("notes/sol"),WA.room.hideLayer("notes/la"),WA.room.hideLayer("notes/si"),WA.room.showLayer("notes_grey")};WA.state.victory&&s(),WA.state.onVariableChange("victory").subscribe(i=>{i&&s()}),y("musicTiles",[["fa","si","do","re","mi","fa","re","fa","re","fa","si","re","si","sol","re","si"]],async()=>{e("failureSound"),WA.controls.disablePlayerControls(),await m(t),WA.player.moveTo(6*32,26*32).then(({cancelled:i})=>{i==!1&&WA.controls.restorePlayerControls()})},()=>{WA.state.victory=!0,e("successSound"),s()}),WA.room.onEnterLayer("notes/do").subscribe(()=>{WA.state.victory||(e("doSound"),o("musicTiles","do"))}),WA.room.onEnterLayer("notes/re").subscribe(()=>{WA.state.victory||(e("reSound"),o("musicTiles","re"))}),WA.room.onEnterLayer("notes/mi").subscribe(()=>{WA.state.victory||(e("miSound"),o("musicTiles","mi"))}),WA.room.onEnterLayer("notes/fa").subscribe(()=>{WA.state.victory||(e("faSound"),o("musicTiles","fa"))}),WA.room.onEnterLayer("notes/sol").subscribe(()=>{WA.state.victory||(e("solSound"),o("musicTiles","sol"))}),WA.room.onEnterLayer("notes/la").subscribe(()=>{WA.state.victory||(e("laSound"),o("musicTiles","la"))}),WA.room.onEnterLayer("notes/si").subscribe(()=>{WA.state.victory||(e("siSound"),o("musicTiles","si"))}),u(),d("infos",{content:"views.music.text",title:"views.music.title"})}WA.room.onEnterLayer("exit").subscribe(()=>{r.stop()})});
