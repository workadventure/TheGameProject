import{t as _}from"./translate-1ba34e64.js";import{p as A}from"./sounds-bea9d6c6.js";let $=null;const b=(e=["switchingTiles"],t=[])=>{for(let a=0;a<e.length;a++)n(e[a],t[a]??null)},n=(e,t=null,a=!1,r="")=>{const o=JSON.parse(WA.state[`${e}VictoryCondition`]),u=WA.state[`${e}TilesNumber`];if(WA.state[`${e}IsVictory`])t&&t();else for(let s=0;s<Object.keys(o).length;s++)l(e,s),WA.room.onEnterLayer(`${e}/${s}_layer/zone`).subscribe(()=>{WA.state[`${e}IsVictory`]||(a?setTimeout(()=>{$=WA.ui.displayPlayerMessage({message:_("utils.executeAction",{action:_(r)}),callback:()=>{W(e,s,u,o)}})},100):W(e,s,u,o))}),a&&WA.room.onLeaveLayer(`${e}/${s}_layer/zone`).subscribe(()=>{setTimeout(()=>{$==null||$.remove()},100)}),WA.state.onVariableChange(`${e}_${s}_value`).subscribe(()=>{l(e,s)});WA.state.onVariableChange(`${e}IsVictory`).subscribe(s=>{s&&t&&t()})},f=(e,t)=>{for(let a=0;a<Object.keys(t).length;a++)if(WA.state[`${e}_${a}_value`]!=t[a])return!1;return!0},W=(e,t,a,r)=>{let o=WA.state[`${e}_${t}_value`]?WA.state[`${e}_${t}_value`]:0;WA.state[`${e}_${t}_value`]=(o+1)%a,f(e,r)&&(A("successSound"),WA.state[`${e}IsVictory`]=!0)},l=(e,t)=>{WA.room.hideLayer(`${e}/${t}_layer`),WA.room.showLayer(`${e}/${t}_layer/${WA.state[`${e}_${t}_value`]}`);for(let a=1;a<4;a++)WA.room.hideLayer(`${e}/${t}_layer_${a}`),WA.room.showLayer(`${e}/${t}_layer_${a}/${WA.state[`${e}_${t}_value`]}`)};export{b as i,n as s};
