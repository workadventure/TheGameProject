import{i as n}from"./job-89290bbb.js";import"./translate-df78904b.js";import{s as m}from"./firebase-a8cde200.js";import{r as u,i as d,e as o}from"./sounds-dd62bce7.js";import{i as l,s as c}from"./readRunes-30e70f2e.js";import{s as y,t as e}from"./arrayFilling-3bc428d4.js";import{h as A}from"./workadventureFeatures-48ab46db.js";import{o as f}from"./init-4335d005.js";import{d as p,a as W,b}from"./ui-ca9d2579.js";const t="music";f(t).then(async()=>{await n(),p(),W(),b(),A();const i=WA.sound.loadSound(`${u}/sounds/cavewater.mp3`);let r={volume:.1,loop:!0,rate:1,detune:1,delay:0,seek:0,mute:!1};i.play(r),d([{name:"doSound",path:"do.mp3"},{name:"reSound",path:"re.mp3"},{name:"miSound",path:"mi.mp3"},{name:"faSound",path:"fa.mp3"},{name:"solSound",path:"sol.mp3"},{name:"laSound",path:"la.mp3"},{name:"siSound",path:"si.mp3"}]);{const s=()=>{WA.room.hideLayer("notes/do"),WA.room.hideLayer("notes/re"),WA.room.hideLayer("notes/mi"),WA.room.hideLayer("notes/fa"),WA.room.hideLayer("notes/sol"),WA.room.hideLayer("notes/la"),WA.room.hideLayer("notes/si"),WA.room.showLayer("notes_grey")};WA.state.victory&&s(),WA.state.onVariableChange("victory").subscribe(a=>{a&&s()}),y("musicTiles",[["fa","si","do","re","mi","fa","re","fa","re","fa","si","re","si","sol","re","si"]],async()=>{o("failureSound"),await m(t),WA.nav.goToRoom("./music.tmj")},()=>{WA.state.victory=!0,o("successSound"),s()}),WA.room.onEnterLayer("notes/do").subscribe(()=>{WA.state.victory||(o("doSound"),e("musicTiles","do"))}),WA.room.onEnterLayer("notes/re").subscribe(()=>{WA.state.victory||(o("reSound"),e("musicTiles","re"))}),WA.room.onEnterLayer("notes/mi").subscribe(()=>{WA.state.victory||(o("miSound"),e("musicTiles","mi"))}),WA.room.onEnterLayer("notes/fa").subscribe(()=>{WA.state.victory||(o("faSound"),e("musicTiles","fa"))}),WA.room.onEnterLayer("notes/sol").subscribe(()=>{WA.state.victory||(o("solSound"),e("musicTiles","sol"))}),WA.room.onEnterLayer("notes/la").subscribe(()=>{WA.state.victory||(o("laSound"),e("musicTiles","la"))}),WA.room.onEnterLayer("notes/si").subscribe(()=>{WA.state.victory||(o("siSound"),e("musicTiles","si"))}),l(),c("infos",{content:"views.music.text",title:"views.music.title"})}WA.room.onEnterLayer("exit").subscribe(()=>{i.stop()})});
