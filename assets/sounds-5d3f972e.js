import"./translate-d272070d.js";import{o as A}from"./init-0f7c740a.js";const o="http://localhost:5173";let r={},l={},n={};const p=(e,t,a=null)=>{setTimeout(()=>{let s=JSON.parse(WA.state.mapActionVariables);s[e]?s[e]!==a&&t(s[e]):(l[e]=a,s[e]=a,WA.state.mapActionVariables=JSON.stringify(s)),n[e]=a,r[e]=t},11)},f=e=>{let t=JSON.parse(WA.state.mapActionVariables);for(let a=0;a<e.length;a++)if(!t[e[a]]||t[e[a]]===n[e[a]])return!1;return!0},S=(e,t,a)=>{let s=JSON.parse(WA.state.mapActionVariables);setTimeout(()=>{s[e]?a():(l[e]=!1,s[e]=!1,WA.state.mapActionVariables=JSON.stringify(s)),n[e]=!1,r[e]=a},11),WA.state.onVariableChange("mapActionVariables").subscribe(()=>{s=JSON.parse(WA.state.mapActionVariables),!s[e]&&f(t)&&(s[e]=!0,WA.state.mapActionVariables=JSON.stringify(s))})},u=(e,t=null,a=!1)=>{let s=JSON.parse(WA.state.mapActionVariables);t===null?s[e]=a?null:!0:s[e]=t,WA.state.mapActionVariables=JSON.stringify(s)};A().then(()=>{l=WA.state.mapActionVariables!=null?JSON.parse(WA.state.mapActionVariables):{},WA.state.onVariableChange("mapActionVariables").subscribe(e=>{let t=JSON.parse(e);Object.keys(t).forEach(a=>{l[a]!==t[a]&&(t[a]!==null?r[a](t[a]):r[a](),l[a]=t[a])})})});const b=e=>{let t=JSON.parse(WA.state.mapActionVariables);return!!(t[e]&&t[e]!==n[e])},W=e=>JSON.parse(WA.state.mapActionVariables)[e],i={successSound:WA.sound.loadSound(`${o}/sounds/success.mp3`),failureSound:WA.sound.loadSound(`${o}/sounds/failure.mp3`)},c={volume:1,loop:!1,rate:1,detune:1,delay:0,seek:0,mute:!1},O=(e=[],t=`${o}/sounds/`)=>{for(let a=0;a<e.length;a++)i[e[a].name]=WA.sound.loadSound(`${t}${e[a].path}`);p("playSoundForAllPlayers",a=>{a!=null&&i[a].play(c)})},J=e=>{i[e].play(c)},N=e=>{u("playSoundForAllPlayers",e),setTimeout(()=>{u("playSoundForAllPlayers",null,!0)},500)};export{p as a,u as b,S as c,W as d,N as e,b as h,O as i,J as p,o as r};
